---
description: 
globs: 
alwaysApply: true
---
---
description: 
globs: 
alwaysApply: false
---
Общие принципы Kotlin
Основные правила
Используйте английский для всего кода и документации.

Всегда явно указывайте тип переменных и функций (параметры и возвращаемое значение).

Избегайте Any.

Создавайте необходимые типы.

Не оставляйте пустых строк внутри функций.

Номенклатура
PascalCase для классов.

camelCase для переменных, функций и методов.

snake_case для файлов и директорий.

UPPER_CASE для переменных окружения.

Избегайте "магических чисел" — используйте константы.

Начинайте функции с глагола.

Для булевых переменных используйте глаголы: isLoading, hasError, canDelete и т.д.

Используйте полные слова вместо сокращений (кроме общепринятых, таких как API, URL).

Допустимые исключения:

i, j для циклов.

err для ошибок.

ctx для контекстов.

req, res, next для параметров middleware-функций.

Функции
Функции должны быть короткими (менее 20 строк) и выполнять одну задачу.

Именуйте функции по шаблону: глагол + сущность.

Для булевых значений: isX, hasX, canX.

Для void-функций: executeX, saveX и т.д.

Избегайте вложенности блоков:

Используйте ранние проверки и возвраты.

Выносите логику в утилитные функции.

Используйте higher-order функции (map, filter, reduce):

Лямбды для простых операций (≤ 3 строки).

Именованные функции для сложной логики.

Значения параметров по умолчанию предпочтительнее проверок на null.

Сокращайте число параметров через RO-RO (Receive Object, Return Object):

Передавайте несколько параметров объектом.

Возвращайте результат объектом.

Придерживайтесь одного уровня абстракции в функции.

Данные
Для данных используйте data class.

Не злоупотребляйте примитивными типами — инкапсулируйте данные в составные типы.

Валидацию данных делайте внутри классов, а не в функциях.

Предпочитайте неизменяемость:

readonly для неизменяемых данных.

val для констант.

Классы
Соблюдайте SOLID.

Композиция предпочтительнее наследования.

Определяйте контракты через интерфейсы.

Классы должны быть небольшими:

≤ 200 строк.

≤ 10 публичных методов.

≤ 10 свойств.

Исключения
Используйте исключения для неожиданных ошибок.

Перехватывайте исключения только для:

Исправления ожидаемой проблемы.

Добавления контекста.

В остальных случаях — глобальный обработчик.

Тестирование
Структура тестов: Arrange-Act-Assert.

Именуйте переменные в тестах явно:

inputX, mockX, actualX, expectedX.

Пишите unit-тесты для всех публичных функций.

Используйте test doubles (кроме "дешёвых" сторонних зависимостей).

Acceptance-тесты для модулей: Given-When-Then.

Специфика Android
Основные принципы
Clean Architecture + разделение на репозитории.

Repository Pattern для работы с данными (включая кэширование).

MVVM для управления состоянием во ViewModel и отрисовки в Activity/ Compose.

Splash Screen

Login / Register

Forgot Password / Verify Email

NavHostController для навигации между экранами.

MainActivity с Compose NavHostController для основных разделов:

Home / Profile / Settings

Patients / Appointments


Flow для состояния UI.

Предпочтительнее  Jetpack Compose

Material 3 для дизайна.

Тестирование
Стандартные widget-тесты для UI.

Интеграционные тесты для API-модулей.